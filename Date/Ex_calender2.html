<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>calender</title>
</head>
<body>
    <!-- 달력 HTML 구조 -->
     <div id="container">
        <div id="date-wrap">
            <!-- 이전 버튼 -->
            <button id="previousButton" onclick="previousButton()">이전</button>
            <!-- 년월일 -->
            <div id="main_date"></div>
            <!-- 이후 버튼 -->
             <button id="nextButton" onclick="nextButton()">이후</button>
        </div>
     </div>
     <table id="date-week">
        <thead>
            <th>일</th>
            <th>월</th>
            <th>화</th>
            <th>수</th>
            <th>목</th>
            <th>금</th>
            <th>토</th>
        </thead>
     </table>
     <!-- 달력 날짜 값 입력 -->
      <div id="displayTable"></div>
    

    <!-- script -->
    <script>
        // document 변수 만들기 -> 전역 변수로 생성
        let yearMonth = document.getElementById('main_date');
        let displayTable = document.getElementById('displayTable');
        let today = new Date(); //오늘날짜/시간

        // 2차원 배열 지정
        let arr = Array.from(Array(6),() => new Array(7));

        // 달력의 배열에 값을 저장하는 함수
        function calendar(){
            // 1. 올해 년도 출력하는 변수
            let year = today.getFullYear(); // 2025
            // 2. 오늘 날짜의 월을 출력하는 변수
            let month = today.getMonth(); // 8 -> 9 월은 +1
            // 3. 이달의 마지막 일자 구하기 그냥 외우기 일의 0을 지정하면 그 전달의 마지막 일자 출력
            // new  Date(2025,5,0) => 2025-3-30
            let lastDate = new Date(year,month+1,0);
            // 마지막 일자 출력하는 변수
            let lastDay = lastDate.getDate();
            // 4. 이 달의 시작 일의 요일 구하기
            // 요일을 출력하기 = getDay() : 0(일) ~ 6(토);
            // 1월 : 0 ~ 12월 : 11

            let startDate = new Date(year,month,1);
            // 당해 년도 월의 시작일자 : 1
            let startDay = startDate.getDate();
            // 당해년도 월의 시작일자의 요일
            let startWeek = startDate.getDay()

            //가로 시작
            let row = 0;

            //배열 초기화 => 안하면 undifiend 출력됨
            for(let i = 0; i < arr.length; i++){
                for(let j = 0; j < arr[i].length; j++){
                    arr[i][j] = '';
                }
            }

            // 핵심 코드
            // 달력 배열의 실제 날짜를 채우는 핵심 로직
            // i 의 시작은 1일인데, 1일부터 시작해서 마지막 일인 30일까지 반복해라
            for(let i = startDay; i <= lastDay; i++){
                // 현재 달의 1일부터 마지막 날까지 반복
                // day = 0, startweek = 5 =>  arr[0][5]
                arr[row][startWeek] = i;

                // 6(토요일)이 되면 줄바꿈
                //
                if(startWeek < arr[row].length-1){
                    //만약 현재 요일이 6(토요일)이 아니면
                    startWeek++;
                }else{
                    //현재 요일이 토요일이면 한주가 끝남
                    //다음 행으로 이동
                    row++;
                    //startWeek reset
                    startWeek = 0;
                }
            }
        }
        // display() 호출하여 화면출력
        //display 출력하는 함수
        function display(){
            // 반드시 해야하는 작업
            calendar(); // 달력 호출
            let tb = "<table border='1' class='cal_table'>";
            // 가로줄 출력
            for(let i = 0; i < arr.length; i++){
                tb += "<tr>";
                // 세로줄
                for(let j = 0; j < arr[i].length; j++){
                    tb += "<td>" + arr[i][j] + "</td>";
                }
                tb += "</tr>";
            }
            tb += "</table>";
            //상단의 년 월 입력
            // yearMonth
            let year_month = today.getFullYear() + "년" + (today.getMonth()  + 1 ) + "월";
            yearMonth.innerHTML = year_month;
            // 배열에 달력
            displayTable.innerHTML = tb;
        }
        display();

        // 이전버튼 클릭시 날짜의 월이 -1 씩 줄어들면 된다.
        function previousButton(){
            today = new Date(today.getFullYear(), today.getMonth()-1,1);
            display();
        }
        // 이후버튼 클릭시 날짜의 월이 1씩 증가
        function nextButton(){
            today = new Date(today.getFullYear(), today.getMonth()+1,1);
            display();
        }
   </script>
</body>
</html>